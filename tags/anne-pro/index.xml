<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Anne Pro on jcalado.com</title><link>https://jcalado.com/tags/anne-pro/</link><description>Recent content in Anne Pro on jcalado.com</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 05 Aug 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://jcalado.com/tags/anne-pro/index.xml" rel="self" type="application/rss+xml"/><item><title>QMK on the Anne Pro from Windows</title><link>https://jcalado.com/post/2021/08/05/qmk-anne-pro/</link><pubDate>Thu, 05 Aug 2021 00:00:00 +0000</pubDate><guid>https://jcalado.com/post/2021/08/05/qmk-anne-pro/</guid><description>&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Attention:&lt;!-- raw HTML omitted --> The contents of this post apply to the original Anne Pro, not to the Anne Pro 2.&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>&lt;a class="link" href="https://qmk.fm/" target="_blank" rel="noopener"
>QMK&lt;/a> is a firmware for input devices:&lt;/p>
&lt;blockquote>
&lt;p>The goal of the QMK software project is to develop a completely customizable, powerful, and enjoyable firmware experience for any project - keyboard or otherwise - and to provide helpful, encouraging, and kind support and feedback for people with any software development experience.&lt;/p>&lt;/blockquote>
&lt;h2 id="ok-but-why">OK, but why?
&lt;/h2>&lt;h3 id="layers">Layers
&lt;/h3>&lt;p>Imagine pressing a key and all your keys now do something else. You can dedicated media keys on one of those layers, or the Function keys from F13 - F24&amp;hellip;&lt;/p>
&lt;h3 id="space-cadet-shift">Space cadet shift
&lt;/h3>&lt;blockquote>
&lt;p>Essentially, when you tap Left Shift on its own, you get an opening parenthesis; tap Right Shift on its own and you get the closing one. When held, the Shift keys function as normal. Yes, it&amp;rsquo;s as cool as it sounds, and now even cooler supporting Control and Alt as well!&lt;/p>&lt;/blockquote>
&lt;p>Pretty cool, right?&lt;/p>
&lt;h3 id="shift-alt-and-ctrl-tap">Shift, Alt and Ctrl tap
&lt;/h3>&lt;p>Hold shift / alt or ctrl for regular use, tap them for some othery keycode.&lt;/p>
&lt;p>Eg: Tapping shift and releasing can type &lt;code>&amp;lt;&lt;/code>. Or pause music. Or change to another layer, or cut/copy/paste&amp;hellip;.&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;h2 id="qmk-for-the-anne-pro">QMK For the Anne Pro
&lt;/h2>&lt;p>There is a fork of the firmware with support for the original Anne Pro which you can find here: &lt;a class="link" href="https://github.com/msvisser/qmk_firmware/tree/anne_pro/keyboards/anne_pro" target="_blank" rel="noopener"
>msvisser/qmk_firmware&lt;/a>.&lt;/p>
&lt;p>Thank you, &lt;a class="link" href="https://github.com/msvisser" target="_blank" rel="noopener"
>Michiel Visser&lt;/a>!&lt;/p>
&lt;h3 id="installing-from-windows">Installing from Windows
&lt;/h3>&lt;h4 id="1-install-drivers">1) Install drivers
&lt;/h4>&lt;p>For interacting with the keyboard in DFU mode, which allows you to flash a new firmware, you first need the drivers.&lt;/p>
&lt;p>Get the firmware update tools from the HexCore website:&lt;/p>
&lt;p>&lt;a class="link" href="https://service.hexcore.xyz/manual/annepro#41-update-firmware" target="_blank" rel="noopener"
>https://service.hexcore.xyz/manual/annepro#41-update-firmware&lt;/a>&lt;/p>
&lt;p>Direct link to firmware update tool:&lt;/p>
&lt;p>&lt;a class="link" href="https://service.hexcore.xyz/tools/anne_fw_update_tools.rar" target="_blank" rel="noopener"
>https://service.hexcore.xyz/tools/anne_fw_update_tools.rar&lt;/a>&lt;/p>
&lt;ol>
&lt;li>Unzip&lt;/li>
&lt;li>Open &amp;ldquo;Driver&amp;rdquo; folder&lt;/li>
&lt;li>Open Win8.1 folder&lt;/li>
&lt;li>Open x64 folder&lt;/li>
&lt;li>Install dpinst_amd64.exe&lt;/li>
&lt;li>Reboot&lt;/li>
&lt;/ol>
&lt;h4 id="2-download-and-compile-qmk">2) Download and compile QMK
&lt;/h4>&lt;p>I used WSL2, aka running linux inside windows for this part.&lt;/p>
&lt;p>Inside your WSL2 distro with git installed, run:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sh util/linux_install.sh
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git clone https://github.com/msvisser/qmk_firmware.git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git checkout anne_pro
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make git-submodule
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Compile the default keymap with&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>make anne_pro:default
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Convert the .bin file to a .dfu file for use with dfu-util on windows:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>./keyboards/anne_pro/dfuse-pack.py -b 0x08004000:anne_pro_default.bin anne_pro_default.dfu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="3-dfu-mode">3) DFU Mode
&lt;/h4>&lt;p>Place your keyboard in DFU mode:&lt;/p>
&lt;ol>
&lt;li>Connect your keyboard via USB&lt;/li>
&lt;li>Hold the Escape key&lt;/li>
&lt;li>Press the reset button on the back&lt;/li>
&lt;/ol>
&lt;h4 id="4-flash-firmware">4) Flash firmware
&lt;/h4>&lt;p>Open DfuSeDemo.exe from the Anne pro FW update tool package you downloaded earlier.
It should detect your DFU mode keyboard.&lt;/p>
&lt;p>Copy the &lt;code>anne_pro_default.dfu&lt;/code> file from your WSL installation to somewhere the app can access it.&lt;/p>
&lt;p>On the &amp;ldquo;Upgrade and verify&amp;rdquo; section of the app, click choose, pick your dfu file, then click upgrade.&lt;/p>
&lt;p>This should erase the current firmware and load the new one. When complete (there&amp;rsquo;s a progress bar), press the reset button on the back of the keyboard.&lt;/p>
&lt;h4 id="done-">Done ðŸ¥³
&lt;/h4>&lt;p>You now have a working Anne Pro with QMK.
Customize your own keymap if you want.
They&amp;rsquo;re inside &lt;code>keyboards/anne_pro/keymaps&lt;/code>.&lt;/p>
&lt;p>What I&amp;rsquo;ve done is duplicated the &lt;code>default&lt;/code> folder, renamed it &lt;code>jcalado&lt;/code> and customized the keymap to add media controls and such.&lt;/p>
&lt;p>You can compile this new keymap with&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>make anne_pro:jcalado
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./keyboards/anne_pro/dfuse-pack.py -b 0x08004000:anne_pro_jcalado.bin anne_pro_jcalado.dfu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="my-keymap">My keymap
&lt;/h4>&lt;p>My current keymap is also available on github (layer 3 is bluetooth configuration, layer 2 has RGB controls, page down / home / etc).&lt;/p>
&lt;p>&lt;strong>Layer 0&lt;/strong> - Tweaked Anne Pro Portuguese layout.&lt;/p>
&lt;ul>
&lt;li>Mod tap for left shift: Types &lt;code>&amp;lt;&lt;/code>. You can hold right shift and tap left shift to type &lt;code>&amp;gt;&lt;/code>. I usually type with an ISO keyboard and do lots of coding. I wanted to keep this key next to the left shift, so mod-tap was an option.&lt;/li>
&lt;li>Mod tap for left shift: Hold for regular behavior, tap types &lt;code>\&lt;/code>. Left shift + right shift tap types &lt;code>|&lt;/code>. Another ISO layout adaptation.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Layer 1&lt;/strong> - Anne pro keycap printed functions&lt;/p>
&lt;ul>
&lt;li>Pagedown, Page up, RGB lighting controls, F1-F12, etc.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Layer 2&lt;/strong> - Media Controls&lt;/p>
&lt;ul>
&lt;li>Media Play, Next, Previous&lt;/li>
&lt;li>Volume Up, down, mute&lt;/li>
&lt;li>F13 - F21&lt;/li>
&lt;li>Board reset&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Layer 3&lt;/strong> - Anne Pro Bluetooth configuration&lt;/p>
&lt;ul>
&lt;li>&lt;code>ESC&lt;/code> - Exit Bluetooth layer&lt;/li>
&lt;li>&lt;code>1, 2, 3, 4&lt;/code> - Connect to saved profile&lt;/li>
&lt;li>&lt;code>Q, W, E, R&lt;/code> - Save connection to profile&lt;/li>
&lt;li>&lt;code>A, S, D, F&lt;/code> - Delete saved connection&lt;/li>
&lt;li>&lt;code>0&lt;/code> - Toggle legacy Bluetooth mode&lt;/li>
&lt;li>&lt;code>-&lt;/code> - Disable Bluetooth&lt;/li>
&lt;li>&lt;code>+&lt;/code> - Enable Bluetooth&lt;/li>
&lt;/ul>
&lt;p>I also had it change colors when switching layers to highlight special functions, and layers other than 0 had a bliking red number corresponding to active layer, but it seems the lighting goes out of sync easily. Board issue, I&amp;rsquo;m sure.&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/jcalado/anne-pro-qmk-keymap" target="_blank" rel="noopener"
>https://github.com/jcalado/anne-pro-qmk-keymap&lt;/a>&lt;/p>
&lt;p>&lt;!-- raw HTML omitted -->&lt;!-- raw HTML omitted -->Attention:&lt;!-- raw HTML omitted --> Layer 2&amp;rsquo;s media, volume and Fs only work when connected via USB.&lt;!-- raw HTML omitted -->&lt;/p></description></item></channel></rss>