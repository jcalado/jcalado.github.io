<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>QMK on jcalado.com</title>
        <link>https://jcalado.com/tags/qmk/</link>
        <description>Recent content in QMK on jcalado.com</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>pt-pt</language>
        <lastBuildDate>Thu, 05 Aug 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://jcalado.com/tags/qmk/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>QMK on the Anne Pro from Windows</title>
        <link>https://jcalado.com/p/qmk-on-the-anne-pro-from-windows/</link>
        <pubDate>Thu, 05 Aug 2021 00:00:00 +0000</pubDate>
        
        <guid>https://jcalado.com/p/qmk-on-the-anne-pro-from-windows/</guid>
        <description>&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Attention:&lt;!-- raw HTML omitted --&gt; The contents of this post apply to the original Anne Pro, not to the Anne Pro 2.&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://qmk.fm/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;QMK&lt;/a&gt; is a firmware for input devices:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The goal of the QMK software project is to develop a completely customizable, powerful, and enjoyable firmware experience for any project - keyboard or otherwise - and to provide helpful, encouraging, and kind support and feedback for people with any software development experience.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ok-but-why&#34;&gt;OK, but why?&lt;/h2&gt;
&lt;h3 id=&#34;layers&#34;&gt;Layers&lt;/h3&gt;
&lt;p&gt;Imagine pressing a key and all your keys now do something else. You can dedicated media keys on one of those layers, or the Function keys from F13 - F24&amp;hellip;&lt;/p&gt;
&lt;h3 id=&#34;space-cadet-shift&#34;&gt;Space cadet shift&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Essentially, when you tap Left Shift on its own, you get an opening parenthesis; tap Right Shift on its own and you get the closing one. When held, the Shift keys function as normal. Yes, it&amp;rsquo;s as cool as it sounds, and now even cooler supporting Control and Alt as well!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pretty cool, right?&lt;/p&gt;
&lt;h3 id=&#34;shift-alt-and-ctrl-tap&#34;&gt;Shift, Alt and Ctrl tap&lt;/h3&gt;
&lt;p&gt;Hold shift / alt or ctrl for regular use, tap them for some othery keycode.&lt;/p&gt;
&lt;p&gt;Eg: Tapping shift and releasing can type &lt;code&gt;&amp;lt;&lt;/code&gt;. Or pause music. Or change to another layer, or cut/copy/paste&amp;hellip;.&lt;/p&gt;
&lt;!-- raw HTML omitted --&gt;
&lt;h2 id=&#34;qmk-for-the-anne-pro&#34;&gt;QMK For the Anne Pro&lt;/h2&gt;
&lt;p&gt;There is a fork of the firmware with support for the original Anne Pro which you can find here: &lt;a class=&#34;link&#34; href=&#34;https://github.com/msvisser/qmk_firmware/tree/anne_pro/keyboards/anne_pro&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;msvisser/qmk_firmware&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Thank you, &lt;a class=&#34;link&#34; href=&#34;https://github.com/msvisser&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Michiel Visser&lt;/a&gt;!&lt;/p&gt;
&lt;h3 id=&#34;installing-from-windows&#34;&gt;Installing from Windows&lt;/h3&gt;
&lt;h4 id=&#34;1-install-drivers&#34;&gt;1) Install drivers&lt;/h4&gt;
&lt;p&gt;For interacting with the keyboard in DFU mode, which allows you to flash a new firmware, you first need the drivers.&lt;/p&gt;
&lt;p&gt;Get the firmware update tools from the HexCore website:&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://service.hexcore.xyz/manual/annepro#41-update-firmware&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://service.hexcore.xyz/manual/annepro#41-update-firmware&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Direct link to firmware update tool:&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://service.hexcore.xyz/tools/anne_fw_update_tools.rar&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://service.hexcore.xyz/tools/anne_fw_update_tools.rar&lt;/a&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Unzip&lt;/li&gt;
&lt;li&gt;Open &amp;ldquo;Driver&amp;rdquo; folder&lt;/li&gt;
&lt;li&gt;Open Win8.1 folder&lt;/li&gt;
&lt;li&gt;Open x64 folder&lt;/li&gt;
&lt;li&gt;Install dpinst_amd64.exe&lt;/li&gt;
&lt;li&gt;Reboot&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;2-download-and-compile-qmk&#34;&gt;2) Download and compile QMK&lt;/h4&gt;
&lt;p&gt;I used WSL2, aka running linux inside windows for this part.&lt;/p&gt;
&lt;p&gt;Inside your WSL2 distro with git installed, run:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sh util/linux_install.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone https://github.com/msvisser/qmk_firmware.git
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git checkout anne_pro
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make git-submodule
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Compile the default keymap with&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make anne_pro:default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Convert the .bin file to a .dfu file for use with dfu-util on windows:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./keyboards/anne_pro/dfuse-pack.py -b 0x08004000:anne_pro_default.bin anne_pro_default.dfu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;3-dfu-mode&#34;&gt;3) DFU Mode&lt;/h4&gt;
&lt;p&gt;Place your keyboard in DFU mode:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Connect your keyboard via USB&lt;/li&gt;
&lt;li&gt;Hold the Escape key&lt;/li&gt;
&lt;li&gt;Press the reset button on the back&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&#34;4-flash-firmware&#34;&gt;4) Flash firmware&lt;/h4&gt;
&lt;p&gt;Open DfuSeDemo.exe from the Anne pro FW update tool package you downloaded earlier.
It should detect your DFU mode keyboard.&lt;/p&gt;
&lt;p&gt;Copy the &lt;code&gt;anne_pro_default.dfu&lt;/code&gt; file from your WSL installation to somewhere the app can access it.&lt;/p&gt;
&lt;p&gt;On the &amp;ldquo;Upgrade and verify&amp;rdquo; section of the app, click choose, pick your dfu file, then click upgrade.&lt;/p&gt;
&lt;p&gt;This should erase the current firmware and load the new one. When complete (there&amp;rsquo;s a progress bar), press the reset button on the back of the keyboard.&lt;/p&gt;
&lt;h4 id=&#34;done-&#34;&gt;Done ðŸ¥³&lt;/h4&gt;
&lt;p&gt;You now have a working Anne Pro with QMK.
Customize your own keymap if you want. 
They&amp;rsquo;re inside &lt;code&gt;keyboards/anne_pro/keymaps&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;What I&amp;rsquo;ve done is duplicated the &lt;code&gt;default&lt;/code&gt; folder, renamed it &lt;code&gt;jcalado&lt;/code&gt; and customized the keymap to add media controls and such.&lt;/p&gt;
&lt;p&gt;You can compile this new keymap with&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make anne_pro:jcalado
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./keyboards/anne_pro/dfuse-pack.py -b 0x08004000:anne_pro_jcalado.bin anne_pro_jcalado.dfu
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;my-keymap&#34;&gt;My keymap&lt;/h4&gt;
&lt;p&gt;My current keymap is also available on github (layer 3 is bluetooth configuration, layer 2 has RGB controls, page down / home / etc).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Layer 0&lt;/strong&gt; - Tweaked Anne Pro Portuguese layout.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Mod tap for left shift: Types &lt;code&gt;&amp;lt;&lt;/code&gt;. You can hold right shift and tap left shift to type &lt;code&gt;&amp;gt;&lt;/code&gt;. I usually type with an ISO keyboard and do lots of coding. I wanted to keep this key next to the left shift, so mod-tap was an option.&lt;/li&gt;
&lt;li&gt;Mod tap for left shift: Hold for regular behavior, tap types &lt;code&gt;\&lt;/code&gt;. Left shift + right shift tap types &lt;code&gt;|&lt;/code&gt;. Another ISO layout adaptation.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Layer 1&lt;/strong&gt; - Anne pro keycap printed functions&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Pagedown, Page up, RGB lighting controls, F1-F12, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Layer 2&lt;/strong&gt; - Media Controls&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Media Play, Next, Previous&lt;/li&gt;
&lt;li&gt;Volume Up, down, mute&lt;/li&gt;
&lt;li&gt;F13 - F21&lt;/li&gt;
&lt;li&gt;Board reset&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Layer 3&lt;/strong&gt; - Anne Pro Bluetooth configuration&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ESC&lt;/code&gt; - Exit Bluetooth layer&lt;/li&gt;
&lt;li&gt;&lt;code&gt;1, 2, 3, 4&lt;/code&gt; - Connect to saved profile&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Q, W, E, R&lt;/code&gt; - Save connection to profile&lt;/li&gt;
&lt;li&gt;&lt;code&gt;A, S, D, F&lt;/code&gt; - Delete saved connection&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0&lt;/code&gt; - Toggle legacy Bluetooth mode&lt;/li&gt;
&lt;li&gt;&lt;code&gt;-&lt;/code&gt; - Disable Bluetooth&lt;/li&gt;
&lt;li&gt;&lt;code&gt;+&lt;/code&gt; - Enable Bluetooth&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I also had it change colors when switching layers to highlight special functions, and layers other than 0 had a bliking red number corresponding to active layer, but it seems the lighting goes out of sync easily. Board issue, I&amp;rsquo;m sure.&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/jcalado/anne-pro-qmk-keymap&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://github.com/jcalado/anne-pro-qmk-keymap&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;!-- raw HTML omitted --&gt;&lt;!-- raw HTML omitted --&gt;Attention:&lt;!-- raw HTML omitted --&gt; Layer 2&amp;rsquo;s media, volume and Fs only work when connected via USB.&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
